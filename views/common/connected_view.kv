<ConnectedView>
    orientation: "vertical"
    MDTopAppBar:
        id: top_app_bar
        title: "Robonomik Communicator"
        right_action_items: [["connection", lambda x: root.on_close_port(), "Disconnect"]]
    MDTabs:
        lock_swiping: True
        on_tab_switch: root.on_tab_switch(*args)
        MyTab:
            title: "Console"
            ConsoleSubview:
        MyTab:
            title: "Layouts"
            LayoutsSubview:
            LayoutsEditSubview:
            ControllerCreateSubview:
        MyTab:
            title: "Variables"
            VariablesSubview:
            VariableCreateSubview:


<ConsoleSubview>
    size_hint: .8, .9
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDScrollView:
        id: console_scroll
        always_overscroll: False
        smooth_scroll_end: 5
        scroll_wheel_distance: dp(125)
        do_scroll_x: False
        bar_width: dp(10)
        MDLabel:
            id: console
            padding: dp(15)
            adaptive_height: True
            font_size: dp(17)
            line_height: 1.25
            allow_selection: True
            allow_copy: True
            mipmap: True
            valign: "top"
            halign: "left"
    MDTextField:
        multiline: False
        mode: "rectangle"
        hint_text: "Enter message"
        on_focus: if not self.focused: root.view.on_message_send(self)


<LayoutsSubview>
    spacing: dp(15)
    size_hint: .95, .95
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDLabel:
        id: layout_name
        adaptive_height: True
        pos_hint: {"center_x": .5, "center_y": .5}
        text: "Layout: Example 1"
        font_style: "H5"
        halign: "center"
    MDBoxLayout:
        spacing: dp(15)
        adaptive_size: True
        pos_hint: {"center_x": .5, "center_y": .5}
        orientation: "horizontal"
        MDRectangleFlatButton:
            text: "Create Layout"
            on_release: root.view.on_layout_create()
        MDRaisedButton:
            text: "Edit Layout"
            on_release: root.view.on_layout_edit()
        MDRectangleFlatButton:
            text: "Select Layout"
            on_release: root.view.on_layout_select()
        MDRectangleFlatButton:
            text: "Delete Layout"
            on_release: root.view.on_layout_delete()
    MDFloatLayout:
        id: controllers_board
        do_rotation: False


<LayoutsEditSubview>
    spacing: dp(15)
    size_hint: .95, .95
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDLabel:
        id: layout_name
        adaptive_height: True
        pos_hint: {"center_x": .5, "center_y": .5}
        text: "Edit Layout: Example 1"
        font_style: "H5"
        halign: "center"
    MDBoxLayout:
        spacing: dp(15)
        adaptive_size: True
        pos_hint: {"center_x": .5, "center_y": .5}
        orientation: "horizontal"
        MDRaisedButton:
            text: "Save Layout"
            on_release: root.view.on_layout_save()
        MDRaisedButton:
            text: "Add Controller"
            on_release: root.view.on_controller_add()
        MDRectangleFlatButton:
            text: "Cancel"
            on_release: root.view.on_layout_cancel()
    MDFloatLayout:
        id: controllers_board
        do_rotation: False


<VariablesSubview>
    spacing: dp(15)
    size_hint: .8, .9
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDBoxLayout:
        spacing: dp(15)
        adaptive_size: True
        pos_hint: {"center_x": .5, "center_y": .5}
        orientation: "horizontal"
        MDRaisedButton:
            text: "Add Variable"
            on_release: root.view.on_variable_add()
    MDScrollView:
        always_overscroll: False
        smooth_scroll_end: 5
        scroll_wheel_distance: dp(75)
        do_scroll_x: False
        bar_width: dp(10)
        MDList:
            id: variables_list
            spacing: dp(15)
            padding: 0, 0, dp(15), 0


<VariableCreateSubview>
    spacing: dp(15)
    size_hint: .8, .9
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDBoxLayout:
        spacing: dp(15)
        adaptive_size: True
        pos_hint: {"center_x": .5, "center_y": .5}
        orientation: "horizontal"
        MDRaisedButton:
            id: variable_save
            text: "Save"
        MDRectangleFlatButton:
            text: "Cancel"
            on_release: root.view.on_variable_cancel()
    MDScrollView:
        always_overscroll: False
        smooth_scroll_end: 5
        scroll_wheel_distance: dp(75)
        do_scroll_x: False
        bar_width: dp(10)
        MDList:
            spacing: dp(25)
            padding: 0, 0, dp(15), 0
            MDTextField:
                id: variable_name
                multiline: False
                required: True
                mode: "rectangle"
                hint_text: "Variable name"
                text: "Example"
            MDRaisedButton:
                id: variable_type
                size_hint_x: 1
                text: "Int"
                on_release: root.view.on_variable_type_click(self)
            MDRaisedButton:
                id: variable_direction
                size_hint_x: 1
                text: "Input"
                on_release: root.view.on_variable_direction_click(self)
            MDTextField:
                id: variable_interval
                multiline: False
                required: True
                mode: "rectangle"
                filter: "int"
                hint_text: "Interval (milliseconds)"
                text: "100"


<ControllerCreateSubview>
    spacing: dp(15)
    size_hint: .8, .9
    pos_hint: {"center_x": .5, "center_y": .5}
    orientation: "vertical"
    MDBoxLayout:
        spacing: dp(15)
        adaptive_size: True
        pos_hint: {"center_x": .5, "center_y": .5}
        orientation: "horizontal"
        MDRaisedButton:
            id: controller_save
            text: "Save"
        MDRectangleFlatButton:
            text: "Cancel"
            on_release: root.view.on_controller_cancel()
    MDScrollView:
        always_overscroll: False
        smooth_scroll_end: 5
        scroll_wheel_distance: dp(75)
        do_scroll_x: False
        bar_width: dp(10)
        MDList:
            spacing: dp(25)
            padding: 0, 0, dp(15), 0
            MDTextField:
                id: controller_name
                multiline: False
                required: True
                mode: "rectangle"
                hint_text: "Controller name"
                text: "Example"
            MDTextField:
                id: controller_variable
                multiline: False
                required: True
                mode: "rectangle"
                hint_text: "Variable name"
                text: "Example"
            MDTextField:
                id: controller_custom_name
                hint_text: "Custom widget text"
                mode: "rectangle"
                multiline: False
                text: "Click Me!"
            MDRaisedButton:
                id: controller_type
                size_hint_x: 1
                text: "Button"
                on_release: root.view.on_controller_type_click(self)
            MDRaisedButton:
                id: controller_direction
                size_hint_x: 1
                text: "Input"
                on_release: root.view.on_controller_direction_click(self)
            MDBoxLayout:
                spacing: dp(15)
                adaptive_height: True
                orientation: "horizontal"
                MDTextField:
                    id: controller_width
                    hint_text: "Width"
                    mode: "rectangle"
                    multiline: False
                    input_filter: "int"
                    text: "200"
                MDTextField:
                    id: controller_height
                    hint_text: "Height"
                    mode: "rectangle"
                    multiline: False
                    input_filter: "int"
                    text: "200"
            MDBoxLayout:
                spacing: dp(15)
                adaptive_height: True
                orientation: "horizontal"
                MDTextField:
                    id: controller_min_range
                    hint_text: "Min Range Value"
                    mode: "rectangle"
                    multiline: False
                    text: "0"
                MDTextField:
                    id: controller_max_range
                    hint_text: "Max Range Value"
                    mode: "rectangle"
                    multiline: False
                    text: "100"